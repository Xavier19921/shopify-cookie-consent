{% comment %}
@author Youfront
@website https://youfront.dk
@link https://cookieconsent.insites.com/download/
{% endcomment %}

{% if section.settings.cc_enable %}
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.6/cookieconsent.min.css">
  {{ 'https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.6/cookieconsent.min.js' | script_tag }}

  <script>
    window.addEventListener('load', function(){
      window.cookieconsent.initialise({
        "palette": {
          "popup": {
            "background": "{{ section.settings.cc_popup_background_color | default: '#000000' }}",
            {% if section.settings.cc_popup_text_color != blank %}"text": "{{ section.settings.cc_popup_text_color }}"{% endif %}
          },
          "button": {
              "background": "{{ section.settings.cc_button_background_color | default: '#f1d600' }}",
            {% if section.settings.cc_button_text_color != blank %}"text": "{{ section.settings.cc_button_text_color }}"{% endif %}
          }
        },
        "content": {
          "message": "{{ 'message' | t }}",
          "dismiss": "{{ 'dismiss' | t }}",
          "link": "{{ 'link' | t }}",
          {% if section.settings.cc_link_type and section.settings.cc_link_page != blank %}"href": "{{ pages[section.settings.cc_link_page].url }}"{% endif %}
        },
        {% unless section.settings.cc_link_type and section.settings.cc_link_page != blank %}"showLink": false,{% endunless %}
        {% if section.settings.cc_static %}"static": true,{% endif %}
        {% if section.settings.cc_theme != blank %}"theme": "{{ section.settings.cc_theme }}",{% endif %}
        {% if section.settings.cc_position != blank %}"position": "{{ section.settings.cc_position }}"{% endif %}
      });
    });
  </script>
{% endif %}

{% schema %}
  {
    "name": "Cookie consent",
    "settings": [
      {
        "type": "checkbox",
        "id": "cc_enable",
        "label": "Enable",
        "default": false
      },
      {
        "type": "header",
        "content": "Position"
      },
      {
        "type": "select",
        "id": "cc_position",
        "label": "Position",
        "options": [
          {
            "value": "",
            "label": "Banner bottom"
          },
          {
            "value": "top",
            "label": "Banner top"
          },
          {
            "value": "bottom-left",
            "label": "Floating left"
          },
          {
            "value": "bottom-right",
            "label": "Floating right"
          }
        ],
        "default": ""
      },
      {
        "type": "checkbox",
        "id": "cc_static",
        "label": "Static",
        "info": "Only works for banner position",
        "default": false
      },
      {
        "type": "header",
        "content": "Layout"
      },
      {
        "type": "select",
        "id": "cc_theme",
        "label": "Theme",
        "options": [
          {
            "value": "",
            "label": "Block"
          },
          {
            "value": "edgeless",
            "label": "Edgeless"
          },
          {
            "value": "classic",
            "label": "Classic"
          }
        ]
      },
      {
        "type": "header",
        "content": "Palette"
      },
      {
        "type": "color",
        "id": "cc_popup_background_color",
        "label": "Popup background color"
      },
      {
        "type": "color",
        "id": "cc_popup_text_color",
        "label": "Popup text color"
      },
      {
        "type": "color",
        "id": "cc_button_background_color",
        "label": "Button background color"
      },
      {
        "type": "color",
        "id": "cc_button_text_color",
        "label": "Button text color"
      },
      {
        "type": "header",
        "content": "Learn more link"
      },
      {
        "type": "checkbox",
        "id": "cc_link_type",
        "label": "Link to your own policy?",
        "info": "Defaults to cookiesandyou.com",
        "default": false
      },
      {
        "type": "page",
        "id": "cc_link_page",
        "label": "Cookie policy page"
      },
      {
        "type": "header",
        "content": "Custom text"
      },
      {
        "type": "text",
        "id": "cc_text_message",
        "label": "Message"
      },
      {
        "type": "text",
        "id": "cc_text_button",
        "label": "Button"
      }
    ],
    "locales": {
      "en": {
        "message": "This website uses cookies to ensure you get the best experience on our website.",
        "dismiss": "Got it!",
        "link": "Learn more"
      }
    }
  }
{% endschema %}
